{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/bilstr/Documents/GitHub/part7/extended-bloglist/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/bilstr/Documents/GitHub/part7/extended-bloglist/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice}from'@reduxjs/toolkit';import commentService from'../services/comments';import{setNotif}from'./notifReducer';var initialState=[];var commSlice=createSlice({name:'quips',initialState:initialState,reducers:{appendComments:function appendComments(state,action){//console.log(action, 'is action in append comments in comment reducer')\n//console.log(JSON.parse(JSON.stringify(state)), 'is json json state in comment reducer')\n//const newComms = [\nreturn state.concat(action.payload);},addVote:function addVote(state,action){//console.log(action, 'is action in addVote reducer')\nvar id=action.payload.id;//console.log(id, 'is id in add vote')\nvar phraseToReplace=state.find(function(word){return word.id===id;});//console.log(JSON.parse(JSON.stringify(phraseToReplace)), 'is json json phrasetoreplace in add vote reducer')\n//console.log(phraseToReplace.likes, 'is pTR likes in add vote')\nphraseToReplace.likes=action.payload.likes+1;console.log(phraseToReplace.likes,'is pTR likes in add vote after made the same as action payload likes');},removeBlog:function removeBlog(state,action){//console.log(action, 'is action in removeblog')\nvar id=action.payload;var blogWithoutDeleted=state.filter(function(diary){return diary.id!==id;});return blogWithoutDeleted;}}});var _commSlice$actions=commSlice.actions,addVote=_commSlice$actions.addVote,appendComments=_commSlice$actions.appendComments,removeBlog=_commSlice$actions.removeBlog;export{addVote,appendComments,removeBlog};export var initializeComms=function initializeComms(id){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var lequip;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return commentService.getAll(id);case 2:lequip=_context.sent;dispatch(appendComments(lequip));case 4:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var newComment=function newComment(content,id){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var commObj,newComm;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:commObj={comment:content};_context2.next=3;return commentService.create(id,commObj).catch(function(){return dispatch(setNotif('There was an error when submitting your comment. Please wait a few moments and then try again.',5));});case 3:newComm=_context2.sent;//console.log(newComm, 'is new comm in new comment in reducer')\nif(newComm){dispatch(appendComments(newComm));}case 5:case\"end\":return _context2.stop();}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};//export const addingVote = (id, newObject) => {\n//  return async dispatch => {\n//    const voted = await blogService.update(id, newObject)\n//    console.log(voted, 'is voted in adding vote in reducer')\n//    dispatch(addVote(voted))\n//  }\n//}\n//export const removeEntry = (id) => {\n//  console.log(id, 'is id in remove entry in reducer')\n//  return async dispatch => {\n//    const deletion = await blogService.deleteEntry(id)\n//    console.log(deletion, 'is deletion in remove entry')\n//    dispatch(removeBlog(id))\n//  }\n//}\nexport default commSlice.reducer;","map":{"version":3,"names":["createSlice","commentService","setNotif","initialState","commSlice","name","reducers","appendComments","state","action","concat","payload","addVote","id","phraseToReplace","find","word","likes","console","log","removeBlog","blogWithoutDeleted","filter","diary","actions","initializeComms","dispatch","getAll","lequip","newComment","content","commObj","comment","create","catch","newComm","reducer"],"sources":["C:/Users/bilstr/Documents/GitHub/part7/extended-bloglist/src/reducers/commentReducer.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit'\nimport commentService from '../services/comments'\nimport { setNotif } from './notifReducer'\n\nconst initialState = []\n\nconst commSlice = createSlice({\n  name: 'quips',\n  initialState,\n  reducers: {\n    appendComments(state, action){\n      //console.log(action, 'is action in append comments in comment reducer')\n      //console.log(JSON.parse(JSON.stringify(state)), 'is json json state in comment reducer')\n      //const newComms = [\n      return state.concat(action.payload)\n    },\n    addVote(state, action){\n      //console.log(action, 'is action in addVote reducer')\n      const id = action.payload.id\n      //console.log(id, 'is id in add vote')\n      const phraseToReplace = state.find((word) => word.id === id)\n      //console.log(JSON.parse(JSON.stringify(phraseToReplace)), 'is json json phrasetoreplace in add vote reducer')\n      //console.log(phraseToReplace.likes, 'is pTR likes in add vote')\n      phraseToReplace.likes = action.payload.likes + 1\n      console.log(phraseToReplace.likes, 'is pTR likes in add vote after made the same as action payload likes')\n    },\n    removeBlog(state, action){\n      //console.log(action, 'is action in removeblog')\n      const id = action.payload\n      const blogWithoutDeleted = state.filter((diary) => diary.id !== id)\n      return blogWithoutDeleted\n    }\n  }\n})\n\nexport const { addVote, appendComments, removeBlog } = commSlice.actions\n\nexport const initializeComms = (id) => {\n  return async dispatch => {\n    const lequip = await commentService.getAll(id)\n    dispatch(appendComments(lequip))\n  }\n}\n\nexport const newComment = (content, id) => {\n  return async dispatch => {\n    const commObj = { comment: content }\n    const newComm = await commentService.create(id, commObj).catch(() => dispatch(setNotif('There was an error when submitting your comment. Please wait a few moments and then try again.', 5)))\n    //console.log(newComm, 'is new comm in new comment in reducer')\n    if (newComm){\n      dispatch(appendComments(newComm))\n    }\n  }\n}\n\n//export const addingVote = (id, newObject) => {\n//  return async dispatch => {\n//    const voted = await blogService.update(id, newObject)\n//    console.log(voted, 'is voted in adding vote in reducer')\n//    dispatch(addVote(voted))\n//  }\n//}\n\n//export const removeEntry = (id) => {\n//  console.log(id, 'is id in remove entry in reducer')\n//  return async dispatch => {\n//    const deletion = await blogService.deleteEntry(id)\n//    console.log(deletion, 'is deletion in remove entry')\n//    dispatch(removeBlog(id))\n//  }\n//}\n\nexport default commSlice.reducer"],"mappings":"4SAAA,OAASA,WAAW,KAAQ,kBAAkB,CAC9C,MAAOC,eAAc,KAAM,sBAAsB,CACjD,OAASC,QAAQ,KAAQ,gBAAgB,CAEzC,GAAMC,aAAY,CAAG,EAAE,CAEvB,GAAMC,UAAS,CAAGJ,WAAW,CAAC,CAC5BK,IAAI,CAAE,OAAO,CACbF,YAAY,CAAZA,YAAY,CACZG,QAAQ,CAAE,CACRC,cAAc,yBAACC,KAAK,CAAEC,MAAM,CAAC,CAC3B;AACA;AACA;AACA,MAAOD,MAAK,CAACE,MAAM,CAACD,MAAM,CAACE,OAAO,CAAC,CACrC,CAAC,CACDC,OAAO,kBAACJ,KAAK,CAAEC,MAAM,CAAC,CACpB;AACA,GAAMI,GAAE,CAAGJ,MAAM,CAACE,OAAO,CAACE,EAAE,CAC5B;AACA,GAAMC,gBAAe,CAAGN,KAAK,CAACO,IAAI,CAAC,SAACC,IAAI,QAAKA,KAAI,CAACH,EAAE,GAAKA,EAAE,GAAC,CAC5D;AACA;AACAC,eAAe,CAACG,KAAK,CAAGR,MAAM,CAACE,OAAO,CAACM,KAAK,CAAG,CAAC,CAChDC,OAAO,CAACC,GAAG,CAACL,eAAe,CAACG,KAAK,CAAE,sEAAsE,CAAC,CAC5G,CAAC,CACDG,UAAU,qBAACZ,KAAK,CAAEC,MAAM,CAAC,CACvB;AACA,GAAMI,GAAE,CAAGJ,MAAM,CAACE,OAAO,CACzB,GAAMU,mBAAkB,CAAGb,KAAK,CAACc,MAAM,CAAC,SAACC,KAAK,QAAKA,MAAK,CAACV,EAAE,GAAKA,EAAE,GAAC,CACnE,MAAOQ,mBAAkB,CAC3B,CACF,CACF,CAAC,CAAC,CAEK,uBAAgDjB,SAAS,CAACoB,OAAO,CAAzDZ,OAAO,oBAAPA,OAAO,CAAEL,cAAc,oBAAdA,cAAc,CAAEa,UAAU,oBAAVA,UAAU,CAAsB,0CAExE,MAAO,IAAMK,gBAAe,CAAG,QAAlBA,gBAAe,CAAIZ,EAAE,CAAK,CACrC,iGAAO,iBAAMa,QAAQ,oJACEzB,eAAc,CAAC0B,MAAM,CAACd,EAAE,CAAC,QAAxCe,MAAM,eACZF,QAAQ,CAACnB,cAAc,CAACqB,MAAM,CAAC,CAAC,sDACjC,+DACH,CAAC,CAED,MAAO,IAAMC,WAAU,CAAG,QAAbA,WAAU,CAAIC,OAAO,CAAEjB,EAAE,CAAK,CACzC,kGAAO,kBAAMa,QAAQ,2IACbK,OAAO,CAAG,CAAEC,OAAO,CAAEF,OAAQ,CAAC,wBACd7B,eAAc,CAACgC,MAAM,CAACpB,EAAE,CAAEkB,OAAO,CAAC,CAACG,KAAK,CAAC,iBAAMR,SAAQ,CAACxB,QAAQ,CAAC,gGAAgG,CAAE,CAAC,CAAC,CAAC,GAAC,QAAvLiC,OAAO,gBACb;AACA,GAAIA,OAAO,CAAC,CACVT,QAAQ,CAACnB,cAAc,CAAC4B,OAAO,CAAC,CAAC,CACnC,CAAC,uDACF,iEACH,CAAC,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,cAAe/B,UAAS,CAACgC,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}