{"ast":null,"code":"import _toConsumableArray from\"C:/Users/bilstr/Documents/GitHub/part7/extended-bloglist/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/Users/bilstr/Documents/GitHub/part7/extended-bloglist/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/bilstr/Documents/GitHub/part7/extended-bloglist/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import{useParams}from'react-router-dom';import{setNotif}from'../reducers/notifReducer';import{addingVote}from'../reducers/blogReducer';import{newComment}from'../reducers/commentReducer';//import { newComment, initializeComms } from '../reducers/commentReducer'\nimport{useNavigate,Link}from'react-router-dom';import Button from'react-bootstrap/Button';import Spinner from'react-bootstrap/Spinner';import ListGroup from'react-bootstrap/ListGroup';//do we want to add ability to delete?\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Blog=function Blog(){var id=useParams().id;console.log(id,'is id in blog component');var dispatch=useDispatch();var navigate=useNavigate();var blog=useSelector(function(state){return state.blogs;});console.log(blog,'is blog in Blog component');var commentsSelect=useSelector(function(state){return state.comments;});console.log(commentsSelect,'is commentsSelect in blog component');if(blog&&commentsSelect){var displayBlog=blog.find(function(diary){return diary.id===id;});console.log(displayBlog,'is displayblog');var commentsSelectMap=commentsSelect.map(function(thought){return thought.blog?thought:null;});console.log(commentsSelectMap,'is comm select map with thought if thought blog exist');useEffect(function(){console.log('peep');//want to re-run filter maybe, every time map def is updated\n//dispatch(initializeComms(id))\n},[dispatch]);var increaseLikes=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){var updatedBlogInfo;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:updatedBlogInfo={likes:displayBlog.likes+1,author:displayBlog.author,title:displayBlog.title,url:displayBlog.url};console.log(updatedBlogInfo,'is updated blog info');dispatch(addingVote(id,updatedBlogInfo));dispatch(setNotif(\"You added a like to \\\"\".concat(displayBlog.title,\"\\\"\"),5));case 4:case\"end\":return _context.stop();}},_callee);}));return function increaseLikes(_x){return _ref.apply(this,arguments);};}();var postComment=function postComment(event){event.preventDefault();var content=event.target.comment.value;console.log(content,'is content of text file');dispatch(newComment(content,id));event.target.comment.value='';};if(displayBlog){var cSMCopy=_toConsumableArray(commentsSelectMap);var commentBlog=cSMCopy.filter(function(quip){return quip.blog.id?quip.blog.id===id:quip.blog===id;});console.log(commentBlog,'is blog with comments that match blog id in blog component');//const comments = commentBlog.map((notes, i) => <ul key={i}><li>{notes.comment}</li></ul>)\n//console.log(comments, 'is comments in display blog notes to notes without display blog user')\nvar comments=commentBlog.map(function(notes,i){return/*#__PURE__*/_jsx(ListGroup,{children:/*#__PURE__*/_jsx(ListGroup.Item,{children:notes.comment})},i);});console.log(comments,'is comments in display blog notes to notes without display blog user');var label=displayBlog.likes===1?'like':'likes';if(displayBlog.user){return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:displayBlog.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"by \",displayBlog.author]}),/*#__PURE__*/_jsx(\"p\",{children:displayBlog.url}),/*#__PURE__*/_jsxs(\"p\",{children:[displayBlog.likes,\" \",label,\" \",/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return increaseLikes(displayBlog.id);},children:\"like\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"added by \",/*#__PURE__*/_jsx(Link,{to:\"/users/\".concat(displayBlog.user.id),children:displayBlog.user.personName})]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return navigate('/blogs');},children:\"return to the list\"})}),/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsx(\"h3\",{children:\"comments\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:postComment,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"comment\"}),\" \",/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"add comment\"})]}),comments]});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:displayBlog.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"by \",displayBlog.author]}),/*#__PURE__*/_jsx(\"p\",{children:displayBlog.url}),/*#__PURE__*/_jsxs(\"p\",{children:[displayBlog.likes,\" \",label,\" \",/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return increaseLikes(displayBlog.id);},children:\"like\"})]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return navigate('/blogs');},children:\"return to the list\"})}),/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsx(\"h3\",{children:\"comments\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:postComment,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"comment\"}),\" \",/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"add comment\"})]}),comments]});}}}else{return/*#__PURE__*/_jsx(Spinner,{animation:\"border\",variant:\"primary\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})});}};export default Blog;","map":{"version":3,"names":["useEffect","useSelector","useDispatch","useParams","setNotif","addingVote","newComment","useNavigate","Link","Button","Spinner","ListGroup","Blog","id","console","log","dispatch","navigate","blog","state","blogs","commentsSelect","comments","displayBlog","find","diary","commentsSelectMap","map","thought","increaseLikes","updatedBlogInfo","likes","author","title","url","postComment","event","preventDefault","content","target","comment","value","cSMCopy","commentBlog","filter","quip","notes","i","label","user","personName"],"sources":["C:/Users/bilstr/Documents/GitHub/part7/extended-bloglist/src/components/Blog.js"],"sourcesContent":["import { useEffect } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { useParams } from 'react-router-dom'\nimport { setNotif } from '../reducers/notifReducer'\nimport { addingVote } from '../reducers/blogReducer'\nimport { newComment } from '../reducers/commentReducer'\n//import { newComment, initializeComms } from '../reducers/commentReducer'\nimport { useNavigate, Link } from 'react-router-dom'\nimport Button from 'react-bootstrap/Button'\nimport Spinner from 'react-bootstrap/Spinner'\nimport ListGroup from 'react-bootstrap/ListGroup'\n\n//do we want to add ability to delete?\n\nconst Blog = () => {\n  const id = useParams().id\n  console.log(id, 'is id in blog component')\n\n  const dispatch = useDispatch()\n  const navigate = useNavigate()\n\n  const blog = useSelector(state => state.blogs)\n  console.log(blog, 'is blog in Blog component')\n\n  const commentsSelect = useSelector(state => state.comments)\n  console.log(commentsSelect, 'is commentsSelect in blog component')\n\n\n  if (blog && commentsSelect) {\n    const displayBlog = blog.find((diary) => diary.id === id)\n    console.log(displayBlog, 'is displayblog')\n\n    const commentsSelectMap = commentsSelect.map((thought) => thought.blog ? thought : null)\n    console.log(commentsSelectMap, 'is comm select map with thought if thought blog exist')\n\n    useEffect(() => {\n      console.log('peep')\n      //want to re-run filter maybe, every time map def is updated\n      //dispatch(initializeComms(id))\n    }, [dispatch])\n\n    const increaseLikes = async (id) => {\n\n      const updatedBlogInfo = {\n        likes: displayBlog.likes+1,\n        author: displayBlog.author,\n        title: displayBlog.title,\n        url: displayBlog.url\n      }\n\n      console.log(updatedBlogInfo, 'is updated blog info')\n      dispatch(addingVote(id, updatedBlogInfo))\n      dispatch(setNotif(`You added a like to \"${displayBlog.title}\"`, 5))\n    }\n\n    const postComment = (event) => {\n      event.preventDefault()\n      const content = event.target.comment.value\n      console.log(content, 'is content of text file')\n      dispatch(newComment(content, id))\n      event.target.comment.value = ''\n    }\n\n    if (displayBlog) {\n      const cSMCopy = [...commentsSelectMap]\n      const commentBlog = cSMCopy.filter((quip) => quip.blog.id ? quip.blog.id === id : quip.blog === id)\n      console.log(commentBlog, 'is blog with comments that match blog id in blog component')\n\n      //const comments = commentBlog.map((notes, i) => <ul key={i}><li>{notes.comment}</li></ul>)\n      //console.log(comments, 'is comments in display blog notes to notes without display blog user')\n\n      const comments = commentBlog.map((notes, i) => <ListGroup key={i}><ListGroup.Item>{notes.comment}</ListGroup.Item></ListGroup>)\n      console.log(comments, 'is comments in display blog notes to notes without display blog user')\n\n      const label = displayBlog.likes === 1\n        ? 'like'\n        : 'likes'\n\n      if (displayBlog.user) {\n        return (\n          <div className=\"container\">\n            <h1>{displayBlog.title}</h1>\n            <p>by {displayBlog.author}</p>\n            <p>{displayBlog.url}</p>\n            <p>{displayBlog.likes} {label} <Button onClick={() => increaseLikes(displayBlog.id)}>like</Button></p>\n            <p>added by <Link to={`/users/${displayBlog.user.id}`}>{displayBlog.user.personName}</Link></p>\n            <p><Button onClick={() => navigate('/blogs')}>return to the list</Button></p>\n            <p></p>\n            <h3>comments</h3>\n            <form onSubmit={postComment}>\n              <input type=\"text\" name=\"comment\"/> <Button type=\"submit\">add comment</Button>\n            </form>\n            {comments}\n          </div>\n        )\n      }\n      else {\n\n        return (\n          <div className=\"container\">\n            <h1>{displayBlog.title}</h1>\n            <p>by {displayBlog.author}</p>\n            <p>{displayBlog.url}</p>\n            <p>{displayBlog.likes} {label} <Button onClick={() => increaseLikes(displayBlog.id)}>like</Button></p>\n            <p><Button onClick={() => navigate('/blogs')}>return to the list</Button></p>\n            <p></p>\n            <h3>comments</h3>\n            <form onSubmit={postComment}>\n              <input type=\"text\" name=\"comment\"/> <Button type=\"submit\">add comment</Button>\n            </form>\n            {comments}\n          </div>\n        )\n      }\n    }\n  }\n  else {\n    return (\n      <Spinner animation=\"border\" variant=\"primary\">\n        <span className=\"visually-hidden\">Loading...</span>\n      </Spinner>\n    )\n  }\n\n}\nexport default Blog"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}