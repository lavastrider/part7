{"ast":null,"code":"import _objectSpread from\"C:/Users/bilstr/Documents/GitHub/part7/extended-bloglist/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/bilstr/Documents/GitHub/part7/extended-bloglist/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/bilstr/Documents/GitHub/part7/extended-bloglist/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";//import PropTypes from 'prop-types'\nimport loginService from'../services/login';import{setNotif}from'../reducers/notifReducer';import{userData,userToken}from'../reducers/userReducer';import{useField}from'../hooks/index';import{useDispatch}from'react-redux';import{useNavigate}from'react-router-dom';import Button from'react-bootstrap/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var newButtStyle={backgroundColor:'#DEDEDB',borderColor:'black',borderRadius:25,borderWidth:3,color:'black',fontFamily:'Tillana'};var hrStyle={//padding: '10',\ncolor:'#94B9F0',borderWidth:2};var textStyle={fontFamily:'Tillana',textAlign:'center'};var LoginPage=function LoginPage(){var username=useField('userNomen');var password=useField('passing');var navigate=useNavigate();var dispatch=useDispatch();var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var usering;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return loginService.login({username:username.value,password:password.value});case 4:usering=_context.sent;window.localStorage.setItem('loggedBlogAppUser',JSON.stringify(usering));//console.log(usering, 'is usering in handlelogin') <- this has value\ndispatch(userData(usering));dispatch(userToken(usering));dispatch(setNotif({msg:\"Welcome \".concat(usering.personName,\"!\"),variant:'success'},5));navigate('/blogs');_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);dispatch(setNotif({msg:'Error: Wrong username or password',variant:'error'},5));//console.log(exception, 'is exception')\ncase 15:case\"end\":return _context.stop();}},_callee,null,[[1,12]]);}));return function handleLogin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{style:textStyle,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Log in\"}),/*#__PURE__*/_jsx(\"hr\",{style:hrStyle}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},username),{},{placeholder:\"Enter username\"}))}),/*#__PURE__*/_jsx(\"hr\",{style:hrStyle}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},password),{},{placeholder:\"Enter password\"}))}),/*#__PURE__*/_jsx(\"hr\",{style:hrStyle}),/*#__PURE__*/_jsx(Button,{type:\"submit\",style:newButtStyle,children:\"login\"}),\" \",/*#__PURE__*/_jsx(Button,{style:newButtStyle,children:\"forgot password?\"})]})]});};export default LoginPage;","map":{"version":3,"names":["loginService","setNotif","userData","userToken","useField","useDispatch","useNavigate","Button","jsx","_jsx","jsxs","_jsxs","newButtStyle","backgroundColor","borderColor","borderRadius","borderWidth","color","fontFamily","hrStyle","textStyle","textAlign","LoginPage","username","password","navigate","dispatch","handleLogin","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","usering","wrap","_callee$","_context","prev","next","preventDefault","login","value","sent","window","localStorage","setItem","JSON","stringify","msg","concat","personName","variant","t0","stop","_x","apply","arguments","style","children","onSubmit","_objectSpread","placeholder","type"],"sources":["C:/Users/bilstr/Documents/GitHub/part7/extended-bloglist/src/components/LoginPage.js"],"sourcesContent":["//import PropTypes from 'prop-types'\nimport loginService from '../services/login'\nimport { setNotif } from '../reducers/notifReducer'\nimport { userData, userToken } from '../reducers/userReducer'\nimport { useField } from '../hooks/index'\nimport { useDispatch } from 'react-redux'\nimport { useNavigate } from 'react-router-dom'\nimport Button from 'react-bootstrap/Button'\n\nconst newButtStyle = {\n  backgroundColor: '#DEDEDB',\n  borderColor: 'black',\n  borderRadius: 25,\n  borderWidth: 3,\n  color: 'black',\n  fontFamily: 'Tillana'\n}\n\nconst hrStyle = {\n  //padding: '10',\n  color: '#94B9F0',\n  borderWidth: 2\n}\n\nconst textStyle = {\n  fontFamily: 'Tillana',\n  textAlign: 'center'\n}\n\nconst LoginPage = () => {\n\n  const username = useField('userNomen')\n  const password = useField('passing')\n\n  const navigate = useNavigate()\n  const dispatch = useDispatch()\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n\n    try {\n      const usering = await loginService.login({ username: username.value, password: password.value })\n      window.localStorage.setItem( 'loggedBlogAppUser', JSON.stringify(usering) )\n      //console.log(usering, 'is usering in handlelogin') <- this has value\n      dispatch(userData(usering))\n      dispatch(userToken(usering))\n      dispatch(setNotif({ msg: `Welcome ${usering.personName}!`, variant: 'success' }, 5))\n      navigate('/blogs')\n    } catch (exception) {\n      dispatch(setNotif({ msg: 'Error: Wrong username or password', variant: 'error' }, 5))\n      //console.log(exception, 'is exception')\n    }\n  }\n\n\n  return (\n    <div style={textStyle}>\n      <h2>Log in</h2>\n      <hr style={hrStyle}></hr>\n      <form onSubmit={handleLogin}>\n        <div>\n          <input {...username}\n            placeholder='Enter username'\n          />\n        </div>\n        <hr style={hrStyle}></hr>\n        <div>\n          <input {...password}\n            placeholder='Enter password'\n          />\n        </div>\n        <hr style={hrStyle}></hr>\n        <Button type=\"submit\" style={newButtStyle}>login</Button> <Button style={newButtStyle}>forgot password?</Button>\n      </form>\n    </div>\n  )\n}\n\nexport default LoginPage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}