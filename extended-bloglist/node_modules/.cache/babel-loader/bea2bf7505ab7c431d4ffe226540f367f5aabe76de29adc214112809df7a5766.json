{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/bilstr/Documents/GitHub/part7/extended-bloglist/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/bilstr/Documents/GitHub/part7/extended-bloglist/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"C:/Users/bilstr/Documents/GitHub/part7/extended-bloglist/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createSlice}from'@reduxjs/toolkit';import blogService from'../services/blogs';import userService from'../services/user';//import loginService from '../services/login'\n//import { setNotif } from './notifReducer'\nvar initialState=[];var userSlice=createSlice({name:'user',initialState:initialState,reducers:{saveUser:function saveUser(state,action){console.log(JSON.parse(JSON.stringify(state)),'is json json state in save user');console.log(state,'is state in save user');console.log(action,'is action in save user');var copyStateLogin=_objectSpread({},state);copyStateLogin.loggedUser=action.payload;return copyStateLogin;//return state.concat(action.payload)\n},setToken:function setToken(state,action){console.log(JSON.parse(JSON.stringify(state)),'is json json state in set token');console.log(action,'is action in set token');var copyStateToken=_objectSpread({},state);copyStateToken.token=action.payload;return copyStateToken;//return action.payload\n},appendUsers:function appendUsers(state,action){console.log(action,'is action in append users');console.log(JSON.parse(JSON.stringify(state)),'is json json state in append users');//const copyState = [ ...state ]\nvar copyState=_objectSpread({},state);console.log(copyState,'is copy state in append users');//copyState.concat(action.payload)\ncopyState.appendUsers=action.payload;return copyState;//return state.concat(action.payload)\n}}});var _userSlice$actions=userSlice.actions,saveUser=_userSlice$actions.saveUser,setToken=_userSlice$actions.setToken,appendUsers=_userSlice$actions.appendUsers;export{saveUser,setToken,appendUsers};export var userData=function userData(user){//will use save user reducer\nconsole.log(user,'is user in userdata');return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var userInfo;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:userInfo=user;dispatch(saveUser(userInfo));case 2:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var userToken=function userToken(user){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var useToke;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:console.log(user,'is user arg in user token in user reducer');_context2.next=3;return blogService.setToken(user.token);case 3:useToke=_context2.sent;console.log(user.token,'is user dot token in usertoken in user reducer');console.log(useToke,'is usetoke in usertoken in user reducer');dispatch(setToken(useToke));case 7:case\"end\":return _context2.stop();}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var initializeUsers=function initializeUsers(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var userList;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return userService.getAll();case 2:userList=_context3.sent;console.log(userList,'is userList in get users');dispatch(appendUsers(userList));case 5:case\"end\":return _context3.stop();}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};//const handleLogin = (user) => {\n//  console.log('we are in the handlelogin in user reducer')\n//  return async dispatch => {\n//    const usering = await loginService.login({ username: user.username, password: user.password })\n//    console.log('we are in the return async dispatch in handlelogin')\n//    window.localStorage.setItem( 'loggedBlogAppUser', JSON.stringify(usering) )\n//    dispatch(userData(usering))\n//    dispatch(userToken(usering))\n//  }\n//}\nexport var newUser=function newUser(user){console.log(user,'is user in newUser');//handleLogin(user)\nreturn/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(dispatch){var newUserData;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return userService.create(user);case 2:newUserData=_context4.sent;console.log(newUserData,'is new user data');//can't use newUserData to sign in user because does not include password\ndispatch(appendUsers(newUserData));case 5:case\"end\":return _context4.stop();}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export default userSlice.reducer;","map":{"version":3,"names":["createSlice","blogService","userService","initialState","userSlice","name","reducers","saveUser","state","action","console","log","JSON","parse","stringify","copyStateLogin","_objectSpread","loggedUser","payload","setToken","copyStateToken","token","appendUsers","copyState","_userSlice$actions","actions","userData","user","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dispatch","userInfo","wrap","_callee$","_context","prev","next","stop","_x","apply","arguments","userToken","_ref2","_callee2","useToke","_callee2$","_context2","sent","_x2","initializeUsers","_ref3","_callee3","userList","_callee3$","_context3","getAll","_x3","newUser","_ref4","_callee4","newUserData","_callee4$","_context4","create","_x4","reducer"],"sources":["C:/Users/bilstr/Documents/GitHub/part7/extended-bloglist/src/reducers/userReducer.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit'\nimport blogService from '../services/blogs'\nimport userService from '../services/user'\n//import loginService from '../services/login'\n//import { setNotif } from './notifReducer'\n\nconst initialState = []\n\nconst userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    saveUser(state, action) {\n      console.log(JSON.parse(JSON.stringify(state)), 'is json json state in save user')\n      console.log(state, 'is state in save user')\n      console.log(action, 'is action in save user')\n      const copyStateLogin = { ...state }\n      copyStateLogin.loggedUser = action.payload\n      return copyStateLogin\n      //return state.concat(action.payload)\n    },\n    setToken(state, action) {\n      console.log(JSON.parse(JSON.stringify(state)), 'is json json state in set token')\n      console.log(action, 'is action in set token')\n      const copyStateToken = { ...state }\n      copyStateToken.token = action.payload\n      return copyStateToken\n      //return action.payload\n    },\n    appendUsers(state, action) {\n      console.log(action, 'is action in append users')\n      console.log(JSON.parse(JSON.stringify(state)), 'is json json state in append users')\n      //const copyState = [ ...state ]\n      const copyState = { ...state }\n      console.log(copyState, 'is copy state in append users')\n      //copyState.concat(action.payload)\n      copyState.appendUsers = action.payload\n      return copyState\n      //return state.concat(action.payload)\n    }\n  }\n})\n\nexport const { saveUser, setToken, appendUsers } = userSlice.actions\n\nexport const userData = (user) => {\n  //will use save user reducer\n  console.log(user, 'is user in userdata')\n  return async dispatch => {\n    const userInfo = user\n    dispatch(saveUser(userInfo))\n  }\n}\n\nexport const userToken = (user) => {\n  return async dispatch => {\n    console.log(user, 'is user arg in user token in user reducer')\n    const useToke = await blogService.setToken(user.token)\n    console.log(user.token, 'is user dot token in usertoken in user reducer')\n    console.log(useToke, 'is usetoke in usertoken in user reducer')\n    dispatch(setToken(useToke))\n  }\n}\n\nexport const initializeUsers = () => {\n  return async dispatch => {\n    const userList = await userService.getAll()\n    console.log(userList, 'is userList in get users')\n    dispatch(appendUsers(userList))\n  }\n}\n\n//const handleLogin = (user) => {\n//  console.log('we are in the handlelogin in user reducer')\n//  return async dispatch => {\n//    const usering = await loginService.login({ username: user.username, password: user.password })\n//    console.log('we are in the return async dispatch in handlelogin')\n//    window.localStorage.setItem( 'loggedBlogAppUser', JSON.stringify(usering) )\n//    dispatch(userData(usering))\n//    dispatch(userToken(usering))\n//  }\n//}\n\nexport const newUser = (user) => {\n\n  console.log(user, 'is user in newUser')\n  //handleLogin(user)\n\n  return async dispatch => {\n    //const newUserData = await userService.create(user).catch( (error) => console.log(error, 'is the error in new user in user reducer'))\n    const newUserData = await userService.create(user)\n    console.log(newUserData, 'is new user data')\n    //can't use newUserData to sign in user because does not include password\n    dispatch(appendUsers(newUserData))\n  }\n}\n\nexport default userSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}