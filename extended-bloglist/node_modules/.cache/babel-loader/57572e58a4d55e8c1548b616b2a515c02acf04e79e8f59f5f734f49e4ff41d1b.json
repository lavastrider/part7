{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/bilstr/Documents/GitHub/part7/extended-bloglist/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/bilstr/Documents/GitHub/part7/extended-bloglist/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice}from'@reduxjs/toolkit';import commentService from'../services/comments';import{setNotif}from'./notifReducer';var initialState=[];var commSlice=createSlice({name:'quips',initialState:initialState,reducers:{appendComments:function appendComments(state,action){console.log(action,'is action in append comments in comment reducer');console.log(JSON.parse(JSON.stringify(state)),'is json json state in comment reducer');//const newComms = [\nreturn state.concat(action.payload);},addVote:function addVote(state,action){console.log(action,'is action in addVote reducer');var id=action.payload.id;console.log(id,'is id in add vote');var phraseToReplace=state.find(function(word){return word.id===id;});console.log(JSON.parse(JSON.stringify(phraseToReplace)),'is json json phrasetoreplace in add vote reducer');console.log(phraseToReplace.likes,'is pTR likes in add vote');phraseToReplace.likes=action.payload.likes+1;console.log(phraseToReplace.likes,'is pTR likes in add vote after made the same as action payload likes');},removeBlog:function removeBlog(state,action){//console.log(action, 'is action in removeblog')\nvar id=action.payload;var blogWithoutDeleted=state.filter(function(diary){return diary.id!==id;});return blogWithoutDeleted;}}});var _commSlice$actions=commSlice.actions,addVote=_commSlice$actions.addVote,appendComments=_commSlice$actions.appendComments,removeBlog=_commSlice$actions.removeBlog;export{addVote,appendComments,removeBlog};export var initializeComms=function initializeComms(id){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var lequip;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return commentService.getAll(id);case 2:lequip=_context.sent;dispatch(appendComments(lequip));case 4:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var newComment=function newComment(content,id){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var commObj,newComm;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:commObj={comment:content};_context2.next=3;return commentService.create(id,commObj).catch(function(){return dispatch(setNotif('There was an error when submitting your comment. Please wait a few moments and then try again.',5));});case 3:newComm=_context2.sent;console.log(newComm,'is new comm in new comment in reducer');if(newComm){dispatch(appendComments(newComm));}case 6:case\"end\":return _context2.stop();}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};//export const addingVote = (id, newObject) => {\n//  return async dispatch => {\n//    const voted = await blogService.update(id, newObject)\n//    console.log(voted, 'is voted in adding vote in reducer')\n//    dispatch(addVote(voted))\n//  }\n//}\n//export const removeEntry = (id) => {\n//  console.log(id, 'is id in remove entry in reducer')\n//  return async dispatch => {\n//    const deletion = await blogService.deleteEntry(id)\n//    console.log(deletion, 'is deletion in remove entry')\n//    dispatch(removeBlog(id))\n//  }\n//}\nexport default commSlice.reducer;","map":{"version":3,"names":["createSlice","commentService","setNotif","initialState","commSlice","name","reducers","appendComments","state","action","console","log","JSON","parse","stringify","concat","payload","addVote","id","phraseToReplace","find","word","likes","removeBlog","blogWithoutDeleted","filter","diary","actions","initializeComms","dispatch","getAll","lequip","newComment","content","commObj","comment","create","catch","newComm","reducer"],"sources":["C:/Users/bilstr/Documents/GitHub/part7/extended-bloglist/src/reducers/commentReducer.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit'\nimport commentService from '../services/comments'\nimport { setNotif } from './notifReducer'\n\nconst initialState = []\n\nconst commSlice = createSlice({\n  name: 'quips',\n  initialState,\n  reducers: {\n    appendComments(state, action){\n      console.log(action, 'is action in append comments in comment reducer')\n      console.log(JSON.parse(JSON.stringify(state)), 'is json json state in comment reducer')\n      //const newComms = [\n      return state.concat(action.payload)\n    },\n    addVote(state, action){\n      console.log(action, 'is action in addVote reducer')\n      const id = action.payload.id\n      console.log(id, 'is id in add vote')\n      const phraseToReplace = state.find((word) => word.id === id)\n      console.log(JSON.parse(JSON.stringify(phraseToReplace)), 'is json json phrasetoreplace in add vote reducer')\n      console.log(phraseToReplace.likes, 'is pTR likes in add vote')\n      phraseToReplace.likes = action.payload.likes + 1\n      console.log(phraseToReplace.likes, 'is pTR likes in add vote after made the same as action payload likes')\n    },\n    removeBlog(state, action){\n      //console.log(action, 'is action in removeblog')\n      const id = action.payload\n      const blogWithoutDeleted = state.filter((diary) => diary.id !== id)\n      return blogWithoutDeleted\n    }\n  }\n})\n\nexport const { addVote, appendComments, removeBlog } = commSlice.actions\n\nexport const initializeComms = (id) => {\n  return async dispatch => {\n    const lequip = await commentService.getAll(id)\n    dispatch(appendComments(lequip))\n  }\n}\n\nexport const newComment = (content, id) => {\n  return async dispatch => {\n    const commObj = { comment: content }\n    const newComm = await commentService.create(id, commObj).catch(() => dispatch(setNotif('There was an error when submitting your comment. Please wait a few moments and then try again.', 5)))\n    console.log(newComm, 'is new comm in new comment in reducer')\n    if (newComm){\n      dispatch(appendComments(newComm))\n    }\n  }\n}\n\n//export const addingVote = (id, newObject) => {\n//  return async dispatch => {\n//    const voted = await blogService.update(id, newObject)\n//    console.log(voted, 'is voted in adding vote in reducer')\n//    dispatch(addVote(voted))\n//  }\n//}\n\n//export const removeEntry = (id) => {\n//  console.log(id, 'is id in remove entry in reducer')\n//  return async dispatch => {\n//    const deletion = await blogService.deleteEntry(id)\n//    console.log(deletion, 'is deletion in remove entry')\n//    dispatch(removeBlog(id))\n//  }\n//}\n\nexport default commSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}